<!doctype html>
<html lang="en" >
<!--
 ________        __                 _           _             ______   _                        __
|_   __  |      [  |               (_)         (_)          .' ___  | (_)                      |  ]
  | |_ \_|,--.   | |.--.   _ .--.  __   ____   __   .--.   / .'   \_| __   .--.   _ .--.   .--.| |  ,--.   _ .--.   .--.
  |  _|  `'_\ :  | '/'`\ \[ `/'`\][  | [_   ] [  |/ .'`\ \ | |   ____[  |/ .'`\ \[ `/'`\]/ /'`\' | `'_\ : [ `.-. |/ .'`\ \
 _| |_   // | |, |  \__/ | | |     | |  .' /_  | || \__. | \ `.___]  || || \__. | | |    | \__/  | // | |, | | | || \__. |
|_____|  \'-;__/[__;.__.' [___]   [___][_____][___]'.__.'   `._____.'[___]'.__.' [___]    '.__.;__]\'-;__/[___||__]'.__.'
ASCII ART BABY!
-->
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Fabrizio Giordano | JavaScript this and meaning of document.querySelector.bind(document);</title>
  <meta name="description" content="JavaScript this and meaning of document.querySelector.bind(document);" />
  <meta name="author" content="Fabrizio Giordano">
  <meta name="viewport" content="width=device-width" />

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <link href='http://fonts.googleapis.com/css?family=Raleway:400,800' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/assets/css/style.css" type="text/css" media="all" />
  <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/feed/" />
  <link rel="shortcut icon" href="/assets/images/favicon.ico">
</head>
<body>
<div id="header">
  <div class="wrapper">
    <h1><a href="/">Fabrizio Giordano</a></h1>
    <span class="desc">developer, dreamer, product designer and speaker from NYC</span>
  </div>
</div>

<div id="menu">
  <div class="wrapper">
  <ul>
    <li><a href="/">Home</a></li>
    <li class="page_item"><a href="/about/" title="About">About</a></li>
  </ul>
  <div class="clear"></div>
  </div>
</div>
<hr />

<div class="wrapper">
  <div class="container">

    <div class="post">
  <div class="titolo"><h2><a href="/2013/01/this-javascript">JavaScript this and meaning of document.querySelector.bind(document);</a></h2></div>
  <small>10 January 2013 </small>
  <div class="corpo">
    <h3>d.querySelector.bind(d);</h3>

<p>I was checking some parallax optimization on <a href="http://www.html5rocks.com/en/tutorials/speed/parallax/">Html5Rocks</a>
and I notice in a <a href="http://www.html5rocks.com/static/demos/parallax/demo-1a/scripts/parallax.js">script</a>:</p>

<p><code>
(function(win, d) {</p>

<p>  var $ = d.querySelector.bind(d);</p>

<p>  ....</p>

<p>  var mainBG = $('section#content');</p>

<p>  ....</p>

<p>})(window, document);
</code></p>

<p><strong><em><code>var $ = d.querySelector.bind(d);</code></em></strong> was not immediately clear, why bind the document?</p>

<p>I asked on <a href="http://stackoverflow.com/questions/14251357/what-is-the-meaning-of-document-queryselector-binddocument">Stackoverflow</a>
and I got a nice answer from <a href="http://stackoverflow.com/users/1048572/bergi">Bergi</a>:</p>

<p><em>The function is not bound to a specific document (there may be other ones, not just window.document).
Try it without, and you will get an WRONG_THIS_ERR exception - you will need to apply it on an object that implements the <a href="http://www.w3.org/TR/selectors-api/#interface-definitions">Document interface</a>.</em></p>

<p><em>Also have a look on <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this">MDN's introduction to the this keyword</a> on how the thisVal("context") of a function call is determined.
However I got back to some other considerations about the <code>this</code> keyword in JavaScript.</em></p>

<h3>this</h3>

<p>Again it was about the <code>this</code> keyword in JavaScript. The closest mental representation I came up for the <code>this</code> keyword in JavaScript is that assuming we are in a browser and not in "strict mode" if we create a function:</p>

<p><code>function a() { console.log(this); }</code></p>

<p>and we call</p>

<p><code>a();</code></p>

<p>the console print <code>window</code>. It is like JavaScript <strong>append</strong> <code>this</code> behind the scene eg. <code>this.a();</code>. In this case <code>this</code> is the <em>window</em> context.</p>

<p>For the same reason if we create a new object <code>var o = {};</code> and we assign the a method <code>o.a = a;</code> and we execute <code>o.a();</code>
the console print the <code>o</code> object.</p>

<p>Note, this might not be the proper explanation, but it is the easiest way for me to remember it.</p>

<p>Therefore for <code>var $ = d.querySelector.bind(d);</code>  we are assigning to $ a new function <em>querySelector</em>. <br/>
<code>bind</code> assign <code>document</code> as <code>this</code> of the new function.<br/>
At the end it is as we execute<br/>
<strong>$('something')</strong> as <strong>document.querySelector('something')</strong></p>

    <div class="clear"></div>
  </div>
  <a name="comment"></a>
  <div id="disqus_thread"></div>
  <script type="text/javascript">
  var disqus_shortname = 'fabriziogiordanogit';
  (function() {
  	var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  	dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
  	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

  </div>
  <hr />

  <div id="sidebar">
    <div class="block">
      <h2>
        Hi there, Iâ€™m Fabrizio.
        <br/>I am a <strong>developer</strong>, <strong>dreamer</strong>, <strong>product designer</strong> and speaker from NYC.
        <br/>I work at <a href="http://www.marvel.com">Marvel Entertainment</a>.
        <br/>I <a href="/archive/">write</a>, <a href="http://twitter.com/fabrygio">tweet</a>, speak and <a href="https://github.com/fabriziogiordano/">share code</a> about stuffs I find online and I like.
      </h2>
    </div>

    <div class="block">
        <h3>Where to find me</h3>
        <h4>Mail:</h4>
        <p>giordano.fabrizio@gmail.com</p>

        <h4>Twitter:</h4>
        <p><a href="http://twitter.com/fabrygio">@fabrygio</a></p>

        <h4>GitHub</h4>
        <p><a href="https://github.com/fabriziogiordano">https://github.com/fabriziogiordano</a></p>

        <h4>LinkedIn</h4>
        <p><a href="http://www.linkedin.com/in/fabriziogiordano">http://www.linkedin.com/in/fabriziogiordano</a></p>

        <h4>Google+</h4>
        <p><a href="http://fabriziogiordano.com/+">+fabriziogiordano</a></p>

        <h4>Codepen.io</h4>
        <p><a href="http://codepen.io/fabriziogiordano">http://codepen.io/fabriziogiordano</a></p>

    </div>

    <div class="block">
      <h3>Archive</h3>
      <ul>
        
          <li class="cat-item"><a href="/2013/02/prototype-font" title="Prototype webapp using distraction free font">Prototype webapp using distraction free font</a></li>
        
          <li class="cat-item"><a href="/2013/01/this-javascript" title="JavaScript this and meaning of document.querySelector.bind(document);">JavaScript this and meaning of document.querySelector.bind(document);</a></li>
        
          <li class="cat-item"><a href="/2012/12/mobile-touchstart-heatmap-landing-google-analytics" title="Mobile heatmap landing page with Google Analytics">Mobile heatmap landing page with Google Analytics</a></li>
        
          <li class="cat-item"><a href="/2011/05/luhn10-algorithm" title="Luhn10 algorithm">Luhn10 algorithm</a></li>
        
      </ul>
    </div>
  </div>

  <div class="clear"></div>

  <div id="footer">
    <span>Copyright &copy; 2013 Fabrizio Giordano. All right reserved. </span>
    <span>Build with <a herf="https://github.com/mojombo/jekyll/">Jekyll</a> The source code of this blog is <a href="https://github.com/fabriziogiordano/fabriziogiordano.github.com">hosted on GitHub</a>. You should <a href="/feed.xml">grab the RSS feed</a> and <a href="http://twitter.com/fabrygio">follow me on Twitter</a>.</span>
  </div>

</div>

<script>
//I know is ugly but it work for my uses case.
if(!location.hash) {
  window.addEventListener("load",function() {
    setTimeout(function(){
      window.scrollTo(0, 1);
    }, 0);
  });
}
</script>

<script>
  var _gaq=[['_setAccount','UA-137286-28'],['_setDomainName', 'fabriziogiordano.com'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src='//www.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'))
</script>

</body>
</html>