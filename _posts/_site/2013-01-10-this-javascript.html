<h3 id='dqueryselectorbindd'>d.querySelector.bind(d);</h3>

<p>I was checking some parallax optimization on <a href='http://www.html5rocks.com/en/tutorials/speed/parallax/'>Html5Rocks</a> and I notice in a <a href='http://www.html5rocks.com/static/demos/parallax/demo-1a/scripts/parallax.js'>script</a>:</p>
<code>
(function(win, d) {

  var $ = d.querySelector.bind(d);

  ....

  var mainBG = $('section#content');

  ....

})(window, document);
</code>
<p><strong><em><code>var $ = d.querySelector.bind(d);</code></em></strong> was not immediately clear, why bind the document?</p>

<p>I asked on <a href='http://stackoverflow.com/questions/14251357/what-is-the-meaning-of-document-queryselector-binddocument'>Stackoverflow</a> and I got a nice answer from <a href='http://stackoverflow.com/users/1048572/bergi'>Bergi</a>:</p>

<p><em>The function is not bound to a specific document (there may be other ones, not just window.document). Try it without, and you will get an WRONG_THIS_ERR exception - you will need to apply it on an object that implements the <a href='http://www.w3.org/TR/selectors-api/#interface-definitions'>Document interface</a>.</em></p>

<p><em>Also have a look on <a href='https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this'>MDN&#8217;s introduction to the this keyword</a> on how the thisVal(&#8220;context&#8221;) of a function call is determined. However I got back to some other considerations about the <code>this</code> keyword in JavaScript.</em></p>

<h3 id='this'>this</h3>

<p>Again it was about the <code>this</code> keyword in JavaScript. The closest mental representation I came up for the <code>this</code> keyword in JavaScript is that assuming we are in a browser and not in &#8220;strict mode&#8221; if we create a function:</p>

<p><code>function a() { console.log(this); }</code></p>

<p>and we call</p>

<p><code>a();</code></p>

<p>the console print <code>window</code>. It is like JavaScript <strong>append</strong> <code>this</code> behind the scene eg. <code>this.a();</code>. In this case <code>this</code> is the <em>window</em> context.</p>

<p>For the same reason if we create a new object <code>var o = {};</code> and we assign the a method <code>o.a = a;</code> and we execute <code>o.a();</code> the console print the <code>o</code> object.</p>

<p>Note, this might not be the proper explanation, but it is the easiest way for me to remember it.</p>

<p>Therefore for <code>var $ = d.querySelector.bind(d);</code> we are assigning to $ a new function <em>querySelector</em>. <br /> <code>bind</code> assign <code>document</code> as <code>this</code> of the new function.<br /> At the end it is as we execute<br /> <strong>$(&#8216;something&#8217;)</strong> as <strong>document.querySelector(&#8216;something&#8217;)</strong></p>